<!DOCTYPE html>
<html>
    <head>
        <title>Archery timer</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="/css/style.css">
        <link rel="icon" type="image/png" href="/assets/icons/favicon.png">
        <script type="text/javascript" src="/js/i18n.js"></script>
        <script type="text/javascript" src="/js/main.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    </head>
    <body class="theme-normal phase-prep">
        <button id="fullscreenButton" type="button" aria-label="Plein écran" title="Plein écran">
            <span class="fullscreen-icon icon-expand" aria-hidden="true">
                <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 7V5a2 2 0 0 1 2-2h2"></path>
                    <path d="M17 3h2a2 2 0 0 1 2 2v2"></path>
                    <path d="M21 17v2a2 2 0 0 1-2 2h-2"></path>
                    <path d="M7 21H5a2 2 0 0 1-2-2v-2"></path>
                    <rect width="10" height="8" x="7" y="8" rx="1"></rect>
                </svg>
            </span>
            <span class="fullscreen-icon icon-minimize" aria-hidden="true">
                <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M8 3v3a2 2 0 0 1-2 2H3"></path>
                    <path d="M21 8h-3a2 2 0 0 1-2-2V3"></path>
                    <path d="M3 16h3a2 2 0 0 1 2 2v3"></path>
                    <path d="M16 21v-3a2 2 0 0 1 2-2h3"></path>
                </svg>
            </span>
        </button>

        <div id="themeToggle">
            <label for="toggleColors" data-i18n="controls.invert_colors">Inverser les couleurs</label>
            <input type="checkbox" id="toggleColors">
        </div>

        <div id="volumeControl">
            <label for="volumeSlider" data-i18n="controls.volume">Volume</label>
            <input type="range" min="0" max="100" step="1" id="volumeSlider" value="100">
            <span id="volumeValue">100%</span>
        </div>

        <div class="timer" id="maintimer">
            <table>
                <tbody>
                    <tr>
                        <td class="abcd noselect" onclick="toggleABCD();"><div id="abcd"><span class="abcd-hint">AB/CD</span></div></td>
                        <td id="timer" class="phase-prep">120</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="config" id="osccontrols">
            <a id="startAction" href="javascript:void(0);" onclick="startTimer();" data-i18n="controls.primary.start">Démarrer</a>
            <br />
            <a id="stopAction" href="javascript:void(0);" class="egcy disabled" onclick="ceaseFire();" aria-disabled="true">
                <svg class="stop-banner" viewBox="0 0 1200 220" role="img" aria-label="Pause d'urgence">
                    <defs>
                        <pattern id="stopHazardPattern" patternUnits="userSpaceOnUse" width="24" height="24" patternTransform="rotate(45)">
                            <rect x="0" y="0" width="12" height="24" fill="#ff8a00"></rect>
                            <rect x="12" y="0" width="12" height="24" fill="#000000"></rect>
                        </pattern>
                    </defs>
                    <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" class="stop-outline-hazard stop-label-layer">Pause d'urgence</text>
                    <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" class="stop-outline-black stop-label-layer">Pause d'urgence</text>
                    <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" class="stop-fill stop-label-layer">Pause d'urgence</text>
                </svg>
            </a>
        </div>

        <div class="hidden">
            <audio id="beep3" preload="auto">
                <source src="/assets/audio/3beep.ogg" type="audio/ogg">
                <source src="/assets/audio/3beep.wav" type="audio/wav">
                <source src="/assets/audio/3beep.m4a" type="audio/mp4">
            </audio>
            <audio id="beep1" preload="auto">
                <source src="/assets/audio/1beep.ogg" type="audio/ogg">
                <source src="/assets/audio/1beep.wav" type="audio/wav">
                <source src="/assets/audio/1beep.m4a" type="audio/mp4">
            </audio>
            <audio id="beep2" preload="auto">
                <source src="/assets/audio/2beep.ogg" type="audio/ogg">
                <source src="/assets/audio/2beep.wav" type="audio/wav">
                <source src="/assets/audio/2beep.m4a" type="audio/mp4">
            </audio>
            <audio id="start" preload="auto">
                <source src="/assets/audio/start.mp3" type="audio/mp3">
            </audio>
            <audio id="cease" preload="auto">
                <source src="/assets/audio/cease.ogg" type="audio/ogg">
                <source src="/assets/audio/cease.wav" type="audio/wav">
                <source src="/assets/audio/cease.m4a" type="audio/mp4">
            </audio>
        </div>

        <button id="helpPanelButton" class="utility-button" type="button" onclick="toggleHelpPanel()" data-i18n="controls.help_language">Aide / langue</button>
        <button id="complexPanelButton" class="utility-button" type="button" onclick="showCtrlPanel()" data-i18n="controls.options">Options</button>

        <div id="helpPanel" class="hidden" aria-hidden="true">
            <h2 data-i18n="help.title">Comment utiliser le timer</h2>
            <p data-i18n="help.usage.abcd_order_line" data-i18n-ab='<span class="help-action-ab">AB</span>' data-i18n-cd='<span class="help-action-cd">CD</span>'></p>
            <p data-i18n="help.usage.single_line_hint"></p>
            <p data-i18n="help.usage.timer_limit_line" data-i18n-remainingtime='<span class="help-action-time">{%$help.tokens.remaining_time}</span>'></p>
            <p data-i18n="help.usage.start_continue_line" data-i18n-start='<span class="help-action-start">{%$controls.primary.start}</span>' data-i18n-resume='<span class="help-action-start">{%$controls.primary.resume}</span>' data-i18n-finish='<span class="help-action-start">{%$controls.primary.finish_round}</span>'></p>
            <p data-i18n="help.usage.emergency_stop_line" data-i18n-emergencystop='<span class="help-action-stop">{%$controls.emergency_stop}</span>'></p>
            <p data-i18n="help.usage.control_panel_line" data-i18n-controlpanel='<span class="help-action-option">{%$help.usage.control_panel_label}</span>'></p>
            <p class="help-language-label" data-i18n="help.language_label">Changer la langue :</p>
            <div class="help-language-buttons">
                <button type="button" class="lang-btn lang-fr" onclick="setLanguage('frFR')"><span>FR</span></button>
                <button type="button" class="lang-btn lang-en" onclick="setLanguage('enUS')"><span>EN</span></button>
                <button type="button" class="lang-btn lang-no" onclick="setLanguage('nbNO')"><span>NO</span></button>
            </div>
            <button type="button" class="help-close" onclick="toggleHelpPanel(false)" data-i18n="controls.close">Fermer</button>
        </div>

        <div id="prepControl">
            <label for="prepTime" class="prep-label" data-i18n="controls.preparation_seconds">Temps de préparation (s) :</label>
            <input type="number" min="3" id="prepTime" placeholder="20">
            <div id="prepFeedback" aria-live="polite"></div>
        </div>
    </body>
</html>
